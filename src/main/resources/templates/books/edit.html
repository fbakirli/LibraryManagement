<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <title>Edit Book</title>
</head>
<body>
<h1>Edit Book</h1>

<form th:action="@{/books/edit/{id}(id=${book.id})}" th:object="${book}" method="post" enctype="multipart/form-data">
    <label for="isbn">ISBN:</label>
    <input type="text" id="isbn" name="isbn" th:field="*{isbn}" required />
    <br>

    <label for="title">Title:</label>
    <input type="text" id="title" name="title" th:field="*{title}" required />
    <br>

    <label for="stock">Stock:</label>
    <input type="number" id="stock" name="stock" th:field="*{stock}" required />
    <br>

    <label for="authors">Authors:</label>
    <select id="authors" name="authorIds" multiple>
        <option th:each="author : ${authors}"
                th:value="${author.id}"
                th:text="${author.name}"
                th:selected="${book.authors.contains(author)}">
        </option>
    </select>
    <br>

    <!-- Display the current image -->
    <label>Current Image:</label>
    <br>
    <img th:if="${book.imagePath}" th:src="${book.imagePath}" alt="Book Image" width="100" height="150"/>
    <p th:unless="${book.imagePath}">No Image</p>
    <br>

    <!-- Upload new image -->
    <label for="image">Upload New Image:</label>
    <input type="file" id="image" name="file" />
    <br>

    <button type="submit">Update Book</button>
</form>

<a href="/" style="display: inline-block; margin-top: 10px;">Home</a> <!-- Home button -->

</body>
</html>